<div class="container-fluid p-6" *ngIf="currentUser; else loggedOut">
  <div class="row">
    <div class="col-lg-12 col-md-12 col-12">
      <!-- Page header -->
      <div class="d-flex justify-content-between align-items-center">
        <div class="border-bottom pb-4 mb-4 ">
          <h3 class="mb-0 fw-bold">Profile du Consultant</h3>
        </div>
        <div>
          <a routerLink="/user/newTaskOfConsultant" class="btn btn-white">Create New Task</a>
        </div>
      </div>
    </div>
  </div>
  <div class="row align-items-center">
    <div class="col-xl-12 col-lg-12 col-md-12 col-12">
      <!-- Bg -->
      <div class="pt-20 rounded-top" style="background:url(assets/images/background/profile-cover.jpg) no-repeat; background-size: cover;"></div>
      <div class="bg-white rounded-bottom smooth-shadow-sm ">
        <div class="d-flex align-items-center justify-content-between pt-4 pb-6 px-4">
          <div class="d-flex align-items-center">
            <!-- avatar image -->
            <div >
              <img src="assets/images/avatar/avatar-1.jpg" class="avatar-xxl rounded-circle border border-4 border-white-color-40" alt="">
            </div>
            <!-- text Nom du Consultant -->
            <div class="lh-1">
              <h2 class="mb-0" >&nbsp;{{currentUser.username}}</h2>
            </div>
          </div>
        </div>
        <!-- nav -->
        <ul class="nav nav-lt-tab px-4" id="pills-tab" role="tablist">
          <li class="nav-item">
            <a class="nav-link active" href="#">Accueil</a>
          </li>
          <li class="nav-item">
            <a class="nav-link" href="#">Projets</a>
          </li>
          <li class="nav-item">
            <a class="nav-link" href="#">Equipe</a>
          </li>

        </ul>
      </div>
    </div>
  </div>
  <!-- content -->
  <!-- row  -->
  <div class="row mt-6">
    <div class="col-md-12 col-12">
      <!-- card  -->
      <div class="card">
        <!-- card header  -->

        <div class="card-header bg-white  py-4">

          <div class="row">
            <div class="col-md-6">   <h4 class="mt-2 p-0">Temps de distribution des taches en heures</h4></div>
            <div class="col-md-6">
              <div class="ms-lg-3  d-md-none d-lg-block">
                <!-- Form
                <form class="d-flex align-items-center">
                  <input type="search" class="form-control" [(ngModel)]="name"
                         (keyup)="searchName($event)" placeholder="Search By Name Of Consultant" />
                </form> -->
              </div>
            </div>

          </div>
        </div>

        <!-- table  -->
        <div class="table-responsive">
          <table class="table text-nowrap mb-0">
            <thead class="table-light">
            <tr >
              <th>Projets</th>
              <th >taches</th>
              <th>suivi du travail</th>
              <th>Heures de travail</th>

            </tr>
            </thead>
            <tbody >
            <!--première ligne du tableau de Timesheet-->
            <ng-container *ngFor="let taskOfConsulatnt of taskOfConsultants; let idx=index; let even=even">
              <tr  >

                <td class="align-middle "  ><a routerLink="/consultant/single-taskOfConsultant/{{taskOfConsulatnt.id}}"> {{taskOfConsulatnt.task.project.name}}</a></td>
                <td class="align-middle"><span>{{taskOfConsulatnt.task.name}}</span></td>
                <td class="align-middle "><span *ngIf="taskOfConsulatnt.state!='DONE'"  [ngClass]="taskOfConsulatnt.state==='PROGRESSE'  ? 'bg-warning' : 'bg-danger'"  class="badge ">
                {{taskOfConsulatnt.state}}

                </span>
                  <span *ngIf="taskOfConsulatnt.state=='DONE'"    class="badge bg-success">{{taskOfConsulatnt.state}}</span>
                </td>
                <td class="text-center ">
                  <div class="row">
                    <div class="col-md-3 mt-2">
                      {{taskOfConsulatnt.duration}}
                    </div>
                    <div class="col-md-auto">
                      <form [formGroup]="formGroup"  method="post">
                        <div class="row">

                          <div class="col-md-auto">
                            <button type="button" (click)="currentDuration(taskOfConsulatnt)" class="btn btn-primary" data-bs-toggle="modal" data-bs-target="#exampleModalScrollable">
                              Edit Hour & State
                            </button>
                            <!-- Modal -->
                          </div>
                          <!-- Button trigger modal -->
                          <div class="modal fade" id="exampleModalScrollable" tabindex="-1" role="dialog" aria-labelledby="exampleModalScrollableTitle" aria-hidden="true">
                            <div class="modal-dialog modal-dialog-scrollable" role="document">
                              <div class="modal-content">
                                <div class="modal-header">
                                  <h5 class="modal-title" id="exampleModalScrollableTitle">Total Hours</h5>
                                  <button type="button" id="Close" class="btn-close" data-bs-dismiss="modal" aria-label="Close">
                                    <span aria-hidden="true"></span>
                                  </button>
                                </div>
                                <div class="modal-body">
                                  <div class="mb-3">
                                    <label for="hours" class="form-label">Total Hours</label>
                                    <input class="form-control" type="number" name="duration" formControlName="duration"  id="hours" min="1" >
                                  </div>
                                  <div>
                                    <label for="state" class="form-label">State</label>
                                    <select class="form-select"  aria-label="Default select example" name="state" id="state" formControlName="state"  >
                                      <option  value="TODO">TODO</option>
                                      <option  value="PROGRESSE">PROGRESS</option>
                                      <option  value="DONE">DONE</option>

                                    </select>
                                  </div>
                                </div>
                                <div class="modal-footer">
                                  <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Close</button>
                                  <button type="button"  (click)="UpdateHoursANDState()" class="btn btn-primary">Save changes</button>
                                </div>


                              </div>
                            </div>
                          </div>

                        </div>
                        <!-- Button trigger modal -->

                        <!-- Modal -->



                      </form>
                    </div></div>
                </td>

              </tr></ng-container>
            <!--deuxième ligne du tableau de Timesheet-->


            </tbody>
          </table>
        </div>
        <div class="card-footer bg-white text-center">
          <nav aria-label="Page navigation example">
            <ul class="pagination justify-content-center">
              <pagination-controls

                previousLabel="Previous"
                nextLabel="Next"
                [responsive]="true"
                (pageChange)="handlePageChange($event)"
              >
                <!-- center alignment -->

                <li class="page-item" *ngFor="
          let taskOfConsultant of taskOfConsultants | paginate : {
                  itemsPerPage: pageSize,
                  currentPage: page,
                  totalItems: count
                };
                 let i = index" >
                  <a class="page-link" href="#">{{i}}</a></li>

              </pagination-controls>
            </ul>
          </nav>

        </div>
      </div>
    </div>
  </div>
  <div class="py-6">
    <!-- row -->
    <div class="row">
      <div class="col-xl-6 col-lg-12 col-md-12 col-12 mb-6">
        <!-- card -->
        <div class="card">
          <!-- card body -->
          <div class="card-body">
            <!-- card title -->
            <h4 class="card-title">A propos du Consultant</h4>
            <!-- row -->
            <div class="row">
              <div class="col-12 mb-5">
                <!-- text -->
                <h6 class="text-uppercase fs-5 ls-2">Post
                </h6>
                <p class="mb-0">Consultant.</p>
              </div>
              <div class="col-6 mb-5">
                <h6 class="text-uppercase fs-5 ls-2">Tél </h6>
                <p class="mb-0">+212625478957</p>
              </div>

              <div class="col-6">
                <h6 class="text-uppercase fs-5 ls-2">Email </h6>
                <p class="mb-0">cons@gmail.com</p>
              </div>

            </div>
          </div>
        </div>
      </div>
      <div class="col-xl-6 col-lg-12 col-md-12 col-12 mb-6">
        <!-- card -->
        <div class="card">
          <!-- card body -->
          <div class="card-body">
            <!-- card title -->
            <h4 class="card-title">Projets Contribués</h4>
            <div class="d-md-flex justify-content-between align-items-center mb-4">
              <div class="d-flex align-items-center">
                <div>
                  <div class="icon-shape icon-lg border p-4 rounded-1">
                    <img src="assets/images/brand/slack-logo.svg" alt="">
                  </div>
                </div>
                <!-- text -->
                <div class="ms-3 ">
                  <h5 class="mb-1"><a href="#" class="text-inherit">Slack Figma Design
                    UI</a></h5>
                  <p class="mb-0 fs-5 text-muted">Project description and details about...</p>
                </div>
              </div>
              <div class="d-flex align-items-center ms-10 ms-md-0 mt-3">
                <!-- avatar group -->
                <div class="avatar-group me-2">
                  <!-- img -->
                  <span class="avatar avatar-sm">
                        <img alt="avatar" src="../assets/images/avatar/avatar-1.jpg" class="rounded-circle">
                    </span>
                  <!-- img -->
                  <span class="avatar avatar-sm">
                        <img alt="avatar" src="../assets/images/avatar/avatar-2.jpg" class="rounded-circle">
                    </span>
                  <!-- img -->
                  <span class="avatar avatar-sm">
                        <img alt="avatar" src="../assets/images/avatar/avatar-3.jpg" class="rounded-circle">
                    </span>
                </div>
                <div>
                  <!-- dropdown -->
                  <div class="dropdown dropstart">
                    <a href="#" class="text-muted text-primary-hover" id="dropdownprojectOne" data-bs-toggle="dropdown" aria-haspopup="true" aria-expanded="false">
                      <i data-feather="more-vertical" class="icon-xxs"></i>
                    </a>
                    <div class="dropdown-menu" aria-labelledby="dropdownprojectOne">
                      <a class="dropdown-item" href="#">Action</a>
                      <a class="dropdown-item" href="#">Another action</a>
                      <a class="dropdown-item" href="#">Something else here</a>
                    </div>
                  </div>
                </div>
              </div>
            </div>
            <div class="d-md-flex justify-content-between align-items-center mb-4">
              <div class="d-flex align-items-center">
                <div>
                  <!-- icon shape -->
                  <div class="icon-shape icon-lg border p-4 rounded-1">
                    <img src="assets/images/brand/3dsmax-logo.svg" alt="">
                  </div>
                </div>
                <!-- text -->
                <div class="ms-3 ">
                  <h5 class="mb-1"><a href="#" class="text-inherit">Design 3d Character</a></h5>
                  <p class="mb-0 fs-5 text-muted">Project description and details about...</p>
                </div>
              </div>

              <div class="d-flex align-items-center ms-10 ms-md-0 mt-3">
                <!-- avatar group -->
                <div class="avatar-group me-2">
                     <span class="avatar avatar-sm">
                        <!-- img -->
                          <img alt="avatar" src="../assets/images/avatar/avatar-4.jpg" class="rounded-circle">
                     </span>
                  <span class="avatar avatar-sm">
                        <!-- img -->
                          <img alt="avatar" src="../assets/images/avatar/avatar-5.jpg" class="rounded-circle">
                    </span>
                  <span class="avatar avatar-sm">
                       <!-- img -->
                         <img alt="avatar" src="../assets/images/avatar/avatar-6.jpg" class="rounded-circle">
                    </span>
                </div>
                <div>
                  <!-- dropdown -->
                  <div class="dropdown dropstart">
                    <a href="#" class="text-muted text-primary-hover" id="dropdownprojectTwo" data-bs-toggle="dropdown" aria-haspopup="true" aria-expanded="false">
                      <i data-feather="more-vertical" class="icon-xxs"></i>
                    </a>
                    <div class="dropdown-menu" aria-labelledby="dropdownprojectTwo">
                      <a class="dropdown-item" href="#">Action</a>
                      <a class="dropdown-item" href="#">Another action</a>
                      <a class="dropdown-item" href="#">Something else here</a>
                    </div>
                  </div>
                </div>
              </div>
            </div>
            <div class="d-md-flex justify-content-between align-items-center mb-4">
              <div class="d-flex align-items-center">
                <div>
                  <!-- icon shape -->
                  <div class="icon-shape icon-lg border p-4 rounded-1">
                    <img src="assets/images/brand/github-logo.svg" alt="">
                  </div>
                </div>
                <!-- text -->
                <div class="ms-3 ">
                  <h5 class="mb-1"><a href="#" class="text-inherit">Github Development</a></h5>
                  <p class="mb-0 fs-5 text-muted">Project description and details about...</p>
                </div>
              </div>
              <div class="d-flex align-items-center ms-10 ms-md-0 mt-3">
                <!-- avatar group -->
                <div class="avatar-group me-2">
                      <span class="avatar avatar-sm">
                        <!-- img -->
                         <img alt="avatar" src="../assets/images/avatar/avatar-7.jpg" class="rounded-circle">
                      </span>
                  <span class="avatar avatar-sm">
                        <!-- img -->
                         <img alt="avatar" src="../assets/images/avatar/avatar-8.jpg" class="rounded-circle">
                    </span>
                  <span class="avatar avatar-sm">
                         <!-- img -->
                         <img alt="avatar" src="../assets/images/avatar/avatar-9.jpg" class="rounded-circle">
                    </span>
                </div>
                <div>
                  <!-- dropdown -->
                  <div class="dropdown dropstart">
                    <a href="#" class="text-muted text-primary-hover" id="dropdownprojectThree" data-bs-toggle="dropdown" aria-haspopup="true" aria-expanded="false">
                      <i data-feather="more-vertical" class="icon-xxs"></i>
                    </a>
                    <div class="dropdown-menu" aria-labelledby="dropdownprojectThree">
                      <a class="dropdown-item" href="#">Action</a>
                      <a class="dropdown-item" href="#">Another action</a>
                      <a class="dropdown-item" href="#">Something else
                        here</a>
                    </div>
                  </div>
                </div>
              </div>
            </div>
            <div class="d-md-flex justify-content-between
                        align-items-center mb-4">
              <div class="d-flex align-items-center">
                <!-- icon shape -->
                <div>
                  <div class="icon-shape icon-lg border p-4 rounded-1">
                    <img src="../assets/images/brand/dropbox-logo.svg" alt="">
                  </div>
                </div>
                <!-- text -->
                <div class="ms-3 ">
                  <h5 class="mb-1"><a href="#" class="text-inherit">Dropbox Design
                    System</a></h5>
                  <p class="mb-0 fs-5 text-muted">Project description and details about...</p>
                </div>
              </div>
              <div class="d-flex align-items-center ms-10 ms-md-0 mt-3">
                <!-- avatar group -->
                <div class="avatar-group me-2">
                  <!-- img -->
                  <span class="avatar avatar-sm">
                              <img alt="avatar"
                                   src="assets/images/avatar/avatar-10.jpg"
                                   class="rounded-circle">
                            </span>
                  <!-- img -->
                  <span class="avatar avatar-sm">
                              <img alt="avatar"
                                   src="../assets/images/avatar/avatar-11.jpg"
                                   class="rounded-circle">
                            </span>
                  <!-- img -->
                  <span class="avatar avatar-sm">
                              <img alt="avatar"
                                   src="../assets/images/avatar/avatar-12.jpg"
                                   class="rounded-circle">
                            </span>
                </div>
                <div>
                  <!-- dropdown -->
                  <div class="dropdown dropstart">
                    <a href="#" class="text-muted text-primary-hover" id="dropdownprojectFour" data-bs-toggle="dropdown" aria-haspopup="true" aria-expanded="false">
                      <i data-feather="more-vertical" class="icon-xxs"></i>
                    </a>
                    <div class="dropdown-menu" aria-labelledby="dropdownprojectFour">
                      <a class="dropdown-item" href="#">Action</a>
                      <a class="dropdown-item" href="#">Another action</a>
                      <a class="dropdown-item" href="#">Something else
                        here</a>
                    </div>
                  </div>
                </div>
              </div>
            </div>
            <div class="d-md-flex justify-content-between
                        align-items-center">
              <div class="d-flex align-items-center">
                <!-- icon shape -->
                <div>
                  <div class="icon-shape icon-lg border p-4 rounded-1
                              bg-primary">
                    <img src="../assets/images/brand/layers-logo.svg" alt="">
                  </div>
                </div>
                <!-- text -->
                <div class="ms-3 ">
                  <h5 class="mb-1"><a href="#" class="text-inherit">Project Management</a></h5>
                  <p class="mb-0 fs-5 text-muted">Project description and details about...</p>
                </div>
              </div>
              <div class="d-flex align-items-center ms-10 ms-md-0 mt-3">
                <!-- avatar group -->
                <div class="avatar-group me-2">
                  <!-- img -->
                  <span class="avatar avatar-sm">
                              <img alt="avatar"
                                   src="../assets/images/avatar/avatar-13.jpg"
                                   class="rounded-circle">
                            </span>
                  <!-- img -->
                  <span class="avatar avatar-sm">
                              <img alt="avatar"
                                   src="../assets/images/avatar/avatar-14.jpg"
                                   class="rounded-circle">
                            </span>
                  <!-- img -->
                  <span class="avatar avatar-sm">
                              <img alt="avatar"
                                   src="../assets/images/avatar/avatar-15.jpg"
                                   class="rounded-circle">
                            </span>
                </div>
                <div>
                  <!-- dropdown -->
                  <div class="dropdown dropstart">
                    <a href="#" class="text-muted text-primary-hover" id="dropdownprojectFoufive" data-bs-toggle="dropdown" aria-haspopup="true" aria-expanded="false">
                      <i data-feather="more-vertical" class="icon-xxs"></i>
                    </a>
                    <div class="dropdown-menu" aria-labelledby="dropdownprojectFoufive">
                      <a class="dropdown-item" href="#">Action</a>
                      <a class="dropdown-item" href="#">Another action</a>
                      <a class="dropdown-item" href="#">Something else
                        here</a>
                    </div>
                  </div>
                </div>
              </div>
            </div>
          </div>
        </div>
      </div>

    </div>
  </div>
</div>
<ng-template #loggedOut>
  Please login.
</ng-template>
